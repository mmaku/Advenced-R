---
title: "R Notebook"
output: html_notebook
---

# 2 Names and values

```{r libaries, message=FALSE, include=FALSE}

# install.packages("lobstr")
library(lobstr)

```

## 2.2 Binding basics

```{r introBB}

x <- c(1, 2, 3)
y <- x

obj_addr(x)
obj_addr(y)

obj_addr(x)== obj_addr(y)

```

```{r non-syntact}

`_abc` <- 1
`_abc`

`if` <- 10
`if`

```


```{r BBexec1}

a <- 1:10
b <- a
c <- b
d <- 1:10

obj_addr(a) == obj_addr(b)
obj_addr(b) == obj_addr(c) 
obj_addr(c) != obj_addr(d) 

```

```{r BBexec2}

obj_addr(mean)
obj_addr(base::mean)
obj_addr(get("mean"))
obj_addr(evalq(mean))
obj_addr(match.fun("mean"))
obj_addr(match.fun(`mean`))

```

```{r BBexec4}

?make.names

```

## 2.3 Copy-on-modify

```{r com}

x <- c(1, 2, 3)
y <- x

obj_addr(x)== obj_addr(y)


y[[3]] <- 4
x
y

obj_addr(x)== obj_addr(y)


```

```{r tracemem}

x <- c(1, 2, 3)
cat("tracing x:", tracemem(x), "\n")

y <- x
cat("tracing y:", tracemem(y), "\n")


y[[3]] <- 4L
y[[3]] <- 5L

untracemem(c(x, y))

```

```{r funtionCalls}

f <- function(a) {
  a
}

x <- c(1, 2, 3)
cat("tracing x:", tracemem(x), "\n")

z <- f(x)

obj_addr(x) == obj_addr(z)

untracemem(x)

```

```{r lists}

l1 <- list(1, 2, 3)
l2 <- l1

tracemem(l2)
l2[[3]] <- 4

ref(l1, l2)

```

```{r DFs}

d1 <- data.frame(x = c(1, 5, 6), y = c(2, 4, 3))
d2 <- d1
d2[, 2] <- d2[, 2] * 2
d3 <- d1
d3[1, ] <- d3[1, ] * 3

ref(d1)
ref(d2)
ref(d3)

```

```{r charVec}

x <- c("a", "a", "abc", "d")
ref(x, character = TRUE)

```

```{r COMexec1}

tracemem(1:10)

```

```{r COMexec2}

x <- c(1L, 2L, 3L)
tracemem(x)

x[[3]] <- 4

```

```{r COMexec3}

a <- 1:10
b <- list(a, a)
c <- list(b, a, 1:10)

ref(a)
ref(b)
ref(c)

```

```{r COMexec4}

x <- list(1:10)
x[[2]] <- x

ref(x)

```

## 2.4 Object size